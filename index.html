
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>dl? cmplnts?</title>
  <meta name="author" content="Zhiming Wang">

  
  <meta name="description" content="Recently I&rsquo;m working on a hobby project in Python, which means editing Python source files a lot. I&rsquo;ve been using Emacs Jedi for almost &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://zmwangx.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="dl? cmplnts?" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53908325-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">dl? cmplnts?</a></h1>
  
    <h2>Mostly technical stuff. Can you figure out what the title stands for?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:zmwangx.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/04/26/using-python-3-with-emacs-jedi/">Using Python 3 With Emacs Jedi</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-26T21:19:14-07:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>26</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:19 pm</span></time>
        
           | <a href="/blog/2015/04/26/using-python-3-with-emacs-jedi/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/04/26/using-python-3-with-emacs-jedi/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently I&rsquo;m working on <a href="https://github.com/zmwangx/storyboard">a hobby project in Python</a>, which means editing Python source files a lot. I&rsquo;ve been using <a href="https://github.com/tkf/emacs-jedi">Emacs Jedi</a> for almost as long as I&rsquo;ve been writing Python, and it has been pretty helpful at completing away long names.</p>

<p>However, Jedi uses <code>python</code> by default, which means <code>python2</code> on most of our systems at this point. Occasionally I&rsquo;m writing Python 3 specific code but Jedi completes to Python 2 or refuses to complete; for the record, I enjoy writing and debugging Python 3.3+ much better than 2.7 (I realized this after trying to create a code base that is backward compatible with 2.7, which means reinventing the wheel or introducing annoying branches from time to time). So naturally I&rsquo;m looking into using Python 3 in Jedi.</p>

<p>The <a href="https://tkf.github.io/emacs-jedi/latest/#how-to-use-python-3-or-any-other-specific-version-of-python">official docs</a> has been confusing and unhelpful at least for me, since it insists on setting up the virtualenv from within Emacs, and it failed for me. Why can&rsquo;t I set up the virtualenv myself? Turns out I can, and it&rsquo;s incredibly simple. The commands below assume that you have installed Jedi and friends (well, dependencies) using <code>package.el</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkdir -p ~/.emacs.d/.python-environments
</span><span class='line'>virtualenv -p /usr/local/bin/python3 ~/.emacs.d/.python-environments/jedi  <span class="c"># or whatever your python3 path is</span>
</span><span class='line'><span class="c"># If you feel like installing the server with &#39;M-x jedi:install-server&#39;, also do the following</span>
</span><span class='line'>~/.emacs.d/.python-environments/jedi/bin/pip install --upgrade ~/.emacs.d/elpa/jedi-20150109.2230/  <span class="c"># you might need to change the version number</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that&rsquo;s it. Put the following in your <code>~/.emacs</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='emacs-lisp'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;python-mode-hook</span> <span class="ss">&#39;jedi:setup</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">jedi:complete-on-dot</span> <span class="no">t</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">jedi:environment-root</span> <span class="s">&quot;jedi&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>where the first two lines should be there whether you want to use Python 3 or not — so only the third line is new, and its meaning is obvious.</p>

<p>At last, start Emacs and do <code>M-x jedi:install-server</code> if you haven&rsquo;t run the <code>pip</code> command above yet. Restart Emacs (if necessary). That&rsquo;s it. Enjoy your Jedi with Python 3. (Type <code>import conf</code>, for instance, to be convinced that you&rsquo;re really autocompleting Python 3).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/03/22/back-up-os-x-app-icons/">Back Up OS X App Icons</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-22T16:58:50-07:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>4:58 pm</span></time>
        
           | <a href="/blog/2015/03/22/back-up-os-x-app-icons/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/03/22/back-up-os-x-app-icons/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>OS X application icons are valuable assets, and it&rsquo;s interesting to see how they evolve over time. This is especially the case when we upgraded to OS X 10.10 Yosemite, when Apple and many design-aware third party developers overhauled (mainly flattened) their icons.</p>

<p>However, we lose all the old icons when we do a major OS upgrade. Technically they still live in Time Machine backups, but those are a pain to pull out. Therefore, I wrote a script just now to back up app icons of all applications living in <code>/Applications</code> (including those symlinked to <code>/Applications</code>, e.g., apps installed through <code>brew cask</code>) and its level-one subdirectories, and <code>/System/Library/CoreServices</code> (for <code>Finder.app</code> and such). Here&rsquo;s the script:</p>

<figure class='code'><figcaption><span>backup-app-icons</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'><span class="k">function</span> app_version
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># $1 is the path to the app</span>
</span><span class='line'>    /usr/libexec/PlistBuddy -c <span class="s2">&quot;print CFBundleShortVersionString&quot;</span> <span class="s2">&quot;$1&quot;</span>/Contents/Info.plist 2&gt;/dev/null <span class="o">||</span> date +%Y%m%d
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> app_icon_path
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># $1 is the path to the app</span>
</span><span class='line'>    <span class="nv">filename</span><span class="o">=</span><span class="k">$(</span>/usr/libexec/PlistBuddy -c <span class="s2">&quot;print CFBundleIconFile&quot;</span> <span class="s2">&quot;$1&quot;</span>/Contents/Info.plist 2&gt;/dev/null<span class="k">)</span>
</span><span class='line'>    <span class="o">[[</span> -n <span class="k">${</span><span class="nv">filename</span><span class="k">}</span> <span class="o">]]</span> <span class="o">||</span> <span class="k">return</span>
</span><span class='line'>    <span class="nv">filename</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;${filename}&quot;</span> .icns<span class="k">)</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;$1/Contents/Resources/${filename}.icns&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> process_app
</span><span class='line'><span class="o">{</span>
</span><span class='line'>    <span class="c"># $1 is the path to the app</span>
</span><span class='line'>    <span class="nv">name</span><span class="o">=</span><span class="k">$(</span>basename <span class="s2">&quot;$1&quot;</span> .app <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span><span class="k">)</span>
</span><span class='line'>    <span class="nv">path</span><span class="o">=</span><span class="k">$(</span>realpath -e <span class="s2">&quot;$1&quot;</span><span class="k">)</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&quot;${RED}error: broken link &#39;${path}&#39;${RESET}&quot;</span> &gt;<span class="p">&amp;</span>2<span class="p">;</span> <span class="k">return</span> 1<span class="p">;</span> <span class="o">}</span>
</span><span class='line'>    <span class="nv">version</span><span class="o">=</span><span class="k">$(</span>app_version <span class="s2">&quot;${path}&quot;</span><span class="k">)</span>
</span><span class='line'>    <span class="nv">icon_path</span><span class="o">=</span><span class="k">$(</span>app_icon_path <span class="s2">&quot;${path}&quot;</span><span class="k">)</span>
</span><span class='line'>    <span class="o">[[</span> -n <span class="k">${</span><span class="nv">icon_path</span><span class="k">}</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&quot;${YELLOW}warning: &#39;$1&#39; has no app icon${RESET}&quot;</span><span class="p">;</span> <span class="k">return</span> 1<span class="p">;</span> <span class="o">}</span>
</span><span class='line'>    <span class="o">[[</span> -f <span class="k">${</span><span class="nv">icon_path</span><span class="k">}</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&quot;${RED}error: &#39;${icon_path}&#39; does not exist${RESET}&quot;</span> &gt;<span class="p">&amp;</span>2<span class="p">;</span> <span class="k">return</span> 1<span class="p">;</span> <span class="o">}</span>
</span><span class='line'>    cp <span class="s2">&quot;${icon_path}&quot;</span> <span class="s2">&quot;${name}-${version}.icns&quot;</span>
</span><span class='line'>    <span class="nb">echo</span> <span class="s2">&quot;${name}-${version}.icns&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>find /Applications -maxdepth <span class="m">2</span> -name <span class="s1">&#39;*.app&#39;</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read </span>app<span class="p">;</span> <span class="k">do</span> process_app <span class="s2">&quot;${app}&quot;</span><span class="p">;</span> <span class="k">done</span>
</span><span class='line'>find /System/Library/CoreServices -maxdepth <span class="m">1</span> -name <span class="s1">&#39;*.app&#39;</span> <span class="p">|</span> <span class="k">while</span> <span class="nb">read </span>app<span class="p">;</span> <span class="k">do</span> process_app <span class="s2">&quot;${app}&quot;</span><span class="p">;</span> <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p>The script is also available as a <a href="https://gist.github.com/zmwangx/fad97e085045a21ebc1d">gist</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/24/the-new-onedrive-api/">The New OneDrive API</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-24T18:31:19-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:31 pm</span></time>
        
           | <a href="/blog/2015/02/24/the-new-onedrive-api/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/02/24/the-new-onedrive-api/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Microsoft released the new OneDrive API today. See the blog post announcement <a href="https://blog.onedrive.com/the-new-onedrive-api/">here</a>. One highlight is that <a href="http://onedrive.github.io/items/upload_large_files.htm">large file upload</a> is now officially supported. Previously, large file upload was handled with a semi-official API using the BITS protocol; the only documentation was a <a href="https://gist.github.com/rgregg/37ba8929768a62131e85">gist</a>. Now it is handled through standard HTTP <code>POST</code>. With this major release, there&rsquo;s likely a lot of work to be done with <a href="https://github.com/mk-fg/python-onedrive">python-onedrive</a>. I have opened an issue: <code>mk-fg/python-onedrive#52</code> — <a href="https://github.com/mk-fg/python-onedrive/issues/52">New OneDrive API support</a>.</p>

<p>Interestingly, the new OneDrive API doc is hosted on GitHub Pages — <a href="http://onedrive.github.io">onedrive.github.io</a>, rather than MSDN. Exactly a week ago I wrote a piece, &ldquo;<a href="http://zmwangx.github.io/blog/2015/02/17/microsoft-is-getting-cool-but-not-its-website/">Microsoft is getting cool (but not its website)</a>&rdquo;. Looks like they are doing something about their website (or better put, their online identity), too.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/21/all-is-not-lost/">All Is Not Lost</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-21T17:12:32-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>5:12 pm</span></time>
        
           | <a href="/blog/2015/02/21/all-is-not-lost/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/02/21/all-is-not-lost/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Lubos Motl always attacks the Many-Worlds Interpretation as if it is on the same level as anti-scientific claims. He even went on to attack Hugh Everett (the guy who first formulated this interpretation) personally; <em>ad hominem</em> is of course typical Motl shit, and I don&rsquo;t bother to find those posts. Anyway, here&rsquo;s yet another one: <a href="http://motls.blogspot.com/2015/02/many-worlds-rozali-carroll-exchange.html">Many worlds: a Rozali-Carroll exchange</a>.</p>

<p>Disclaimer: I&rsquo;m not really a proponent of Many-Worlds, at least not of the part of it that says history really <em>branches</em> into <em>many</em> worlds. Well, Lubos is at least right about one thing: &ldquo;many worlds&rdquo;, taken literally, can&rsquo;t even be well-defined. However, I do believe that the world is can be described by a &ldquo;universal wavefunction&rdquo; (I prefer to call it the &ldquo;universal state vector&rdquo;) in some gargantuan Hilbert space. And the universal state vector has to evolve deterministically. The reason is simple: <strong><em>all information is not lost</em></strong>. This principle is fundamental to physics and it&rsquo;s simply not on the same level as falsifiability, which is little more than a philosopher&rsquo;s toy and a nice thing to have. In quantum mechanics&#8217; terms, <em>unitarity must be respected</em>; this is why the Copenhagen Interpretation, or at least the wavefunction-collapsing part of it, cannot hold up to serious scrutiny — no operator can ever collapse the wavefunction and break unitarity. Those who hold the Copenhagen Interpretation are confusing <em>their</em> lack of knowledge (albeit a fundamental one, as they were entangled into the system when they make an observation) with the fundamental loss of information (which is not possible).</p>

<p>One may question that if the universal state vector is <em>real</em>, then where&rsquo;s all the unavailable information stored (why is there a <em>fundamental</em> lack of knowledge)? Well, who told you that all information in this universe can be observed or written down? Everything outside our event horizon is also unavailable to us, yet modern physics knows for sure that some of those <em>do</em> exist. Of course we have a hierarchy of belief in the existence of different things, with the universal state vector being hard to believe (and very hard to not believe) or make sense of. But there&rsquo;s no hard cut, and we might some day be able to reason about it.</p>

<p>I don&rsquo;t know how exactly the observed universe is the way it is (i.e., how exactly it fell — or &ldquo;collapsed&rdquo;, which is a convenient word for communication — into the eigenstate that we observed). I&rsquo;m not even sure if the observed universe is the way it is in the objective (ontological) sense — if there were no observers, would it just be an &ldquo;uncollapsed&rdquo; state vector? I suspect that this problem has something to do with consciousness, and I suspect that we are at least hundreds of years from understanding consciousness. (Of course this kind of predictions are all nonsense — no one can look thirty years into the future). At the very least, we may eliminate some possibilities when we know more about consciousness. At any rate, this is an interesting problem that might be outside the capability of human reason, or might not. One may hate it and refuse to talk about it, but one cannot dismiss it as unphysical.</p>

<p>When Lubos dismisses <em>ontology</em> as &ldquo;exactly the same thing&rdquo; as classical physics, he&rsquo;s dismissing the problem above, and making a hard compromise. He&rsquo;s basically saying that we cannot and should not reason about anything outside of what we can observe (this is also a crude classification because obviously he reasons beyond black hole horizons every day). This compromise is very dangerous for physics — sometimes one has to reason beyond one&rsquo;s horizon to formulate a complete and consistent answer. Black holes are one good example of getting of the limit. If we can extend spacetime beyond our event horizon, then why can&rsquo;t we accept <strong><em>the possibility of existence</em></strong> outside our &ldquo;existence horizon&rdquo;, i.e., outside our perceived existence of the universal (and the first hand experience of our own existence inside it)? It&rsquo;s a wild and not well-defined idea, but all new physics starts out not well-defined.</p>

<p>I still remember the last lecture of my first quantum mechanics course in my freshman year, taught by Prof. Michael Peskin. He discussed the interpretations of quantum mechanics. I forgot the exact arguments, but after rejecting other interpretations (including Copenhagen and hidden variable), he resorted to Many-Worlds, citing &ldquo;Once you eliminate the impossible, whatever remains, no matter how improbable, must be the truth.&rdquo; I was not particularly satisfied. To me, once you eliminate the impossible, if whatever remains is still improbable, then maybe your imagination is not wild enough. I also remember the second time I took QM I, this time the graduate version, taught by Prof. Lenny Susskind. He stressed unitarity so much and showed us how wavefunction-collapsing is unnecessary (it was never well-defined anyway, unless you impose it). Unitarity is so important that triggered his &ldquo;black hole war&rdquo;.</p>

<p>The point of mentioning my two professors is that the interpretation problem of quantum mechanics has never been settled, and people who hold opinions contrary to Copenhagen should be respected. Lubos, on the other hand, tries to convince people that this problem has been settled, and actually settled for ninety years. He is either lying or delusional himself.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/20/my-dock-and-updated-omnifocus/">My Dock and Updated OmniFocus</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-20T16:16:10-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>4:16 pm</span></time>
        
           | <a href="/blog/2015/02/20/my-dock-and-updated-omnifocus/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/02/20/my-dock-and-updated-omnifocus/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Simplicity is the ultimate sophistication.</p></blockquote>

<p>Here&rsquo;s a screenshot of my dock at the moment.</p>

<p><img src="http://i.imgur.com/EhaJw57.png" title="My current dock. Left to right: Finder (TotalFinder), Mail, Safari, Chrome, iTunes, OmniFocus, iTerm2, Activity Monitor, and mpv. Everything except mpv is persistent." alt="My dock" /></p>

<p>Left to right: Finder (TotalFinder), Mail, Safari, Chrome, iTunes, OmniFocus, iTerm2, Activity Monitor, and mpv. Everything except mpv is persistent; mpv is there because I happen to be looping a piece of music with mpv that I don&rsquo;t plan to add to the iTunes library. The point is that it never looked this good, mainly due to the updated OmniFocus icon. Finally they put some serious thought into graphics design! Just compare <a href="/misc/omnifocus-v2.1.icns">the v2.1 icon</a> to <a href="/misc/omnifocus-v2.0.icns">the v2.0 version</a>.</p>

<p><img src="http://i.imgur.com/KeTz5wK.png" alt="" /></p>

<p>Obviously the overpolished (and honestly, badly polished) 2.0 one belongs to the past. It &ldquo;stood out&rdquo; even among Mavericks dock icons (in terms of color), not to mention among the flattened-down Yosemite ones. Today, it finally becomes a native member of the dock. (Well, actually not today — I&rsquo;ve been using the beta for a while, so the new icon didn&rsquo;t come as a surprise.) In fact, this time the Omni Group seems to be on a graphics design streak these days, and today they have a really impressive App Store feature banner:</p>

<p><img src="http://i.imgur.com/tILmveQ.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/17/microsoft-is-getting-cool-but-not-its-website/">Microsoft Is Getting Cool (but Not Its Website)</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-17T18:57:19-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>17</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>6:57 pm</span></time>
        
           | <a href="/blog/2015/02/17/microsoft-is-getting-cool-but-not-its-website/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/02/17/microsoft-is-getting-cool-but-not-its-website/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Microsoft is getting kind of cool. For instance, open sourcing .NET last year caused quite a buzz. Ars has a good piece about this: <a href="http://arstechnica.com/information-technology/2015/02/microsofts-continuing-efforts-to-be-cool/">Microsoft’s continuing efforts to be cool</a>.</p>

<p>Three weeks ago Microsoft made another minor but totally unexpected move: they integrated AgileBits&#8217; <code>onepassword-app-extension</code> (<a href="https://github.com/AgileBits/onepassword-app-extension">GitHub</a>) into the 5.0 release of the OneDrive iOS app. I didn&rsquo;t realize this until I read <a href="https://blog.onedrive.com/onedrive_secure_password/">yesterday&rsquo;s blog post on the OneDrive Blog</a>. This is really amazing when you put it in context: I mean, take a look at <a href="https://blog.agilebits.com/1password-apps/">Apps that love 1Password</a>, i.e., apps that have integrated that extension. Out of the ninety apps listed to date, there are only a dozen apps that I&rsquo;ve heard of, and the only brands bigger than 1Password are Microsoft, Tumblr, Uber (infamous), and Walmart (what?). Microsoft embracing third party is surely an interesting phenomenon.</p>

<p>Meanwhile,</p>

<ul>
<li>Microsoft still won&rsquo;t let us use our password managers to its fullest (of course we can&rsquo;t blame it on the OneDrive folks): 16 characters max in this day and age (screenshot taken today)? Hmm. And I remember Microsoft recently said password length isn&rsquo;t the main source of vulnerability of its customers. WTF. Who cares about <em>your</em> stupid customers. I just want to protect <em>my own</em> data, and make sure that in case of a breach on <em>your</em> side, I won&rsquo;t face the same loss as your technologically illiterate customers. But that&rsquo;s not currently possible with Microsoft.</li>
</ul>


<p><img src="http://i.imgur.com/CNv76zw.png" alt="" /></p>

<ul>
<li>Microsoft&rsquo;s UI design is still shit, <a href="/blog/2015/01/21/web-design-microsoft-vs-apple/">as well as their website</a>; I mean, seriously:</li>
</ul>


<p><img src="http://i.imgur.com/wu66zZc.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/10/monitor-progress-of-your-unix-pipes-with-pv/">Monitor Progress of Your Unix Pipes With Pv</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-02-10T02:18:30-08:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:18 am</span></time>
        
           | <a href="/blog/2015/02/10/monitor-progress-of-your-unix-pipes-with-pv/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/02/10/monitor-progress-of-your-unix-pipes-with-pv/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently I found a very useful utility called <code>pv</code> (for &ldquo;pipe viewer&rdquo;). <a href="http://www.ivarch.com/programs/pv.shtml">Here</a> is its home page, and it can be easily installed with <code>brew</code>. According to its man page,</p>

<blockquote><p><code>pv</code> shows the progress of data through a pipeline by giving information such as time elapsed, percentage completed (with progress bar), current throughput rate, total data transferred, and ETA.</p></blockquote>

<p>For more info, see its home page (linked above) and <a href="http://linux.die.net/man/1/pv">man page</a>.</p>

<p>Why is it useful? Well, pretty obvious if you are in the right audience. For me, one particularly important use case is with <code>openssl sha1</code>. I deal with videos on a daily basis, and back up all of them to OneDrive (ever since OneDrive went unlimited). To ensure integrity of transfer (in future downloads), I append the first seven digits of each video to its filename. This should be more than enough to reveal any error in transfer except for active attacks. One additional advantage is that I can now have multiple versions of a same show, event, or whatever and don&rsquo;t have to worry about naming conflicts (and don&rsquo;t have to artificially say <code>-ver1</code>, <code>-ver2</code>, etc.). This little merit turns out to be huge and saves me a lot of trouble, since naming things is intrinsically hard:</p>

<blockquote><p>There are only three hard things concurrency, in computer science: cache invalidation, naming things, and off-by-one errors.</p></blockquote>

<p>(I learned this beefed up version of two hard things only recently.) Well, too much digression. So SHA-1 sum is useful. (By the way, I learned in my crypto class that SHA-1 is broken as a collision-resistant hash function — not HMAC, which doesn&rsquo;t assume collision-resistance — and SHA-256 should be used instead. However, I&rsquo;m not protecting against active attacks — I won&rsquo;t be able to without a shared secret key anyway — so the faster SHA-1 is good for my purpose.) But at the same time, SHA-1 is slow. Maybe what&rsquo;s actually slow is my HDD. Whatever the bottleneck, generating a SHA-1 digest for a 10 GB video file isn&rsquo;t fun at all; it&rsquo;s even more of a torture when there&rsquo;s no progress bar and ETA. But hopelessly waiting has become a thing of the past with the advent (well, discovery in my case) of <code>pv</code>. Now I have nice and informative progress bars, which reduces the anxiety of waiting by an order of magnitude.</p>

<p>For the record, here&rsquo;s the current version of my ruby script that attaches the first seven digits of the SHA-1 digests of the given files to their filenames:</p>

<figure class='code'><figcaption><span>7sha1</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;fileutils&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">rename</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span class='line'>  <span class="n">num_items</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="n">length</span>
</span><span class='line'>  <span class="n">num_done</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="n">items</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span><span class="o">|</span><span class="n">path</span><span class="o">|</span>
</span><span class='line'>    <span class="nb">printf</span><span class="p">(</span><span class="vg">$stderr</span><span class="p">,</span> <span class="s2">&quot;%d/%d: %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">num_done</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num_items</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="o">!</span> <span class="no">File</span><span class="o">.</span><span class="n">directory?</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span class='line'>      <span class="n">extname</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">extname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span class='line'>      <span class="n">basename</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">extname</span><span class="p">)</span>
</span><span class='line'>      <span class="n">dirname</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span class='line'>      <span class="n">sha1sum</span> <span class="o">=</span> <span class="sb">`pv &#39;</span><span class="si">#{</span><span class="n">path</span><span class="si">}</span><span class="sb">&#39; | openssl sha1`</span>
</span><span class='line'>      <span class="n">new_basename</span> <span class="o">=</span> <span class="n">basename</span> <span class="o">+</span> <span class="s2">&quot;__&quot;</span> <span class="o">+</span> <span class="n">sha1sum</span><span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="o">]</span>
</span><span class='line'>      <span class="n">new_path</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirname</span><span class="p">,</span> <span class="n">new_basename</span> <span class="o">+</span> <span class="n">extname</span><span class="p">)</span>
</span><span class='line'>      <span class="no">FileUtils</span><span class="o">.</span><span class="n">mv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">new_path</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="no">STDERR</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">#{</span><span class="n">path</span><span class="si">}</span><span class="s2">: directory ignored&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">num_done</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">rename</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>You might ask why I used ruby (littered with bash) when it&rsquo;s obviously a job for bash or perl. Well, the reason is that I first wrote this thing in ruby as a <a href="https://gist.github.com/zmwangx/d6406fb8bf51ac768770">Dropzone 3 action</a>. I&rsquo;m lazy, so I just borrowed that script and modified its printout for shell use.</p>

<hr />

<p>By the way, I also found a project called <code>cv</code> (Coreutils Viewer), which is <a href="https://github.com/Xfennec/cv">officially described as</a></p>

<blockquote><p>&hellip; a Tiny, Dirty, Linux-Only C command that looks for coreutils basic commands (cp, mv, dd, tar, gzip/gunzip, cat, etc.) currently running on your system and displays the percentage of copied data.</p></blockquote>

<p>I&rsquo;ll look into it when I have time, but it from its description, it seems to be limited to coreutils, and OS X support might not be too awesome (at this point).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/21/web-design-microsoft-vs-apple/">Web Design: Microsoft vs Apple</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-21T16:30:51-08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>4:30 pm</span></time>
        
           | <a href="/blog/2015/01/21/web-design-microsoft-vs-apple/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/01/21/web-design-microsoft-vs-apple/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just had a look at Ars&rsquo;s live blog on today&rsquo;s Windows 10 Event to acquire a sense of where Windows is heading. There&rsquo;s not much to report. Safari rip-off (Microsoft&rsquo;s new Spartan — wait, is this name also inspired by Safari? — features reading mode and offline reading list, Safari&rsquo;s killer features) aside, the focus seems to be virtual assistant, PC-tablet-phone integration, and gaming, none of which I&rsquo;m interested in. The hologram thing does look cool, but putting the hype aside, I doubt if it will be really useful for the masses (except probably in gaming, one of my most despised applications of computing). I&rsquo;m not a visionary so maybe I&rsquo;m underestimating this.</p>

<p>(Another interesting development is &ldquo;Windows as a Service&rdquo; — WaaS? Microsoft isn&rsquo;t communiating it effectively. If it means paid subscription, am I ever going to subscribe to an OS? No. If it instead means free system updates for the lifetime of a device, then this WaaS thing is just a vacuous buzz phrase — Apple has already been doing it for two years. Longer if you count the cheap upgrades. However, if free system updates is indeed the case, then what about VMs? Not sure.)</p>

<p>The only thing I would like to see Apple copy from Microsoft is the unlimited OneDrive — come on, we already paid enough for our hardware, why can&rsquo;t we have unlimited cloud storage? I would even pay $10 per month for that — Microsoft is offering Office 365 along with unlimited cloud storage, all for just $10, so it certainly won&rsquo;t hurt Apple. The current iCloud pricing is ridiculous.</p>

<p>All the discussions above are not the main point of this post though. The point is, I went to the Windows website to learn more about Windows 10, and just can&rsquo;t believe my eyes in how awful it is designed. Just look at the font and the layout of <a href="http://windows.microsoft.com/en-us/windows-10/about">http://windows.microsoft.com/en-us/windows-10/about</a> (full web page screenshot courtesy of <a href="http://web-capture.net">web-capture.net</a>). And compare that to <a href="http://www.apple.com/osx/">http://www.apple.com/osx/</a> (scroll past the Windows screenshot). Holy crap, I even booted my Windows 8.1 VM just to make sure I&rsquo;m not lacking the necessary fonts available on Windows.</p>

<p>Why Microsoft&rsquo;s web design is so shitty is always beyond my grasp. For OS X, a potential customer would be eager to set his hands on it just by looking at its beautifully-crafted homepage and a few screenshots there. For Windows it&rsquo;s exactly the opposite. I mean, apart from metro apps (worst and ugliest desktop experience ever), modern Windows actually looks pretty good. But their shitty advertising totally ruins it. I guess it doesn&rsquo;t matter much for Microsoft, for all design-savvy folks who are not stuck on Windows are already using OS X, and most of their customers just need a commodity OS.</p>

<p><img src="http://i.imgur.com/0eIt4SR.png" alt="" />
<img src="http://i.imgur.com/piUO0xY.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/10/fonts-why-chinese-web-design-is-hard/">Fonts: Why Chinese Web Design Is Hard</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-10T09:30:02-08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>9:30 am</span></time>
        
           | <a href="/blog/2015/01/10/fonts-why-chinese-web-design-is-hard/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/01/10/fonts-why-chinese-web-design-is-hard/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For years I&rsquo;ve been complaining about Chinese websites&#8217; horrendous designs. Yesterday I tried to translate one of my simple project websites to Chinese, and finally realized that web design for the Chinese language is no simple task — much harder than for English. The problem is fonts. This might not be the only problem (and cannot take blame for all the horrendous designs), but it certainly seems to be a roadblock.</p>

<p>The problem with fonts boils down to the fact that the Chinese writing system has too many glyphs. I still remember learning things about the GB 2312 charset when I was twelve — there are 3755 Level 1 characters (more commonly seen), 3008 Level 2 characters, and other symbols and foreign glyphs. Designing more than six thousand Chinese characters is so much harder than designing 26 letters. I&rsquo;m not sure if many glyphs are auto-generated from parts, but that would certainly degrade the quality. The result? Availability of digital fonts suffers. There are simply not so many choices of Chinese fonts. Chinese writing is beautiful, but I&rsquo;ve yet to see a font for screens (let alone the web) that conveys that beauty. This might be subjective, but I have the impression that fonts generally look worse on screen than in print, and more so for Chinese fonts (Retina doesn&rsquo;t help much). For the record, I checked Apple&rsquo;s font usage at the moment, and they are using a tailored font named &ldquo;PingHei&rdquo; (&ldquo;平黑&rdquo;, I guess; see screenshot at the end); I&rsquo;m not at all impressed. Compare that to the English counterpart (also at the end) — not on the same level. (I won&rsquo;t talk about Microsoft since it doesn&rsquo;t feature a design department, or that department is brain dead. Well, I&rsquo;m a little opinionated.)</p>

<p>Another problem triggered by the vast number of glyphs is that font files are large. I looked at a dozen OTF fonts with SC or TC glyphs, and none seems to be below 10 MB. That&rsquo;s clearly a no go on the web — not until everyone has a gigabit connection, I suppose. I tried to Google for Chinese webfonts and had little success, so I&rsquo;m not sure if woff helps. I&rsquo;ve heard that Apple is able to pack a reduced set of PingHei glyphs into woffs less than 1 MB (keep in mind that PingHei being sans serif is simpler than serif fonts like Songti); that&rsquo;s pretty remarkable. I don&rsquo;t know much about font technologies so I can&rsquo;t comment more on this matter, but from my observation all Chinese websites (with the exception of apple.com/cn, I guess) rely on locally installed fonts, and most don&rsquo;t even have a list of fallbacks, i.e., typefaces simply aren&rsquo;t part of their designs. Even if they do have a list of fallbacks, they won&rsquo;t be able to guarantee uniform experience across the board (as far as I know, the lowest common denominator of Chinese fonts across all platforms seem to be zero). Apple has taught us that design must be integrated and perfected (well, Apple wasn&rsquo;t the first to do design, but they did bring it to the digital world and to the masses). Any fragmented design is doomed to fail.</p>

<p><img src="http://i.imgur.com/MPmtSJI.png" alt="" /></p>

<p><img src="http://i.imgur.com/hBpdv0B.png" alt="" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/01/os-x-system-ruby-encoding-annoyance/">OS X System Ruby Encoding Annoyance</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-01T22:49:39-08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>10:49 pm</span></time>
        
           | <a href="/blog/2015/01/01/os-x-system-ruby-encoding-annoyance/#disqus_thread"
             data-disqus-identifier="http://zmwangx.github.io/blog/2015/01/01/os-x-system-ruby-encoding-annoyance/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been using RVM (with fairly up-to-date Rubies) and pry since my day one with Ruby (well, almost), so it actually surprises me today when I found out by chance how poorly the system Ruby behaves when it comes to encoding.</p>

<p>The major annoyance with the current system Ruby (2.0.0p481) is that it can&rsquo;t convert <code>UTF8-MAC</code> to <code>UTF-8</code> (namely, NFD to NFC, as far as I can tell), at least not with Korean characters. Consider the following script:</p>

<figure class='code'><figcaption><span>utf8-mac.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># coding: utf-8</span>
</span><span class='line'><span class="nb">require</span> <span class="s1">&#39;hex_string&#39;</span>
</span><span class='line'><span class="n">str</span> <span class="o">=</span> <span class="s2">&quot;에이핑크&quot;</span>
</span><span class='line'><span class="nb">puts</span> <span class="n">str</span><span class="o">.</span><span class="n">to_hex_string</span>
</span><span class='line'><span class="nb">puts</span> <span class="n">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span> <span class="s2">&quot;UTF8-MAC&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_hex_string</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here are what I get with the system Ruby and the latested brewed Ruby:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>&gt; /usr/bin/ruby --version
</span><span class='line'>ruby 2.0.0p481 <span class="o">(</span>2014-05-08 revision 45883<span class="o">)</span> <span class="o">[</span>universal.x86_64-darwin14<span class="o">]</span>
</span><span class='line'>&gt; /usr/local/bin/ruby --version
</span><span class='line'>ruby 2.2.0p0 <span class="o">(</span>2014-12-25 revision 49005<span class="o">)</span> <span class="o">[</span>x86_64-darwin14<span class="o">]</span>
</span><span class='line'>&gt; /usr/bin/ruby utf8-mac.rb
</span><span class='line'>e1 <span class="m">84</span> 8b e1 <span class="m">85</span> a6 e1 <span class="m">84</span> 8b e1 <span class="m">85</span> b5 e1 <span class="m">84</span> <span class="m">91</span> e1 <span class="m">85</span> b5 e1 <span class="m">86</span> bc e1 <span class="m">84</span> 8f e1 <span class="m">85</span> b3
</span><span class='line'>e1 <span class="m">84</span> 8b e1 <span class="m">85</span> a6 e1 <span class="m">84</span> 8b e1 <span class="m">85</span> b5 e1 <span class="m">84</span> <span class="m">91</span> e1 <span class="m">85</span> b5 e1 <span class="m">86</span> bc e1 <span class="m">84</span> 8f e1 <span class="m">85</span> b3
</span><span class='line'>&gt; /usr/local/bin/ruby utf8-mac.rb
</span><span class='line'>e1 <span class="m">84</span> 8b e1 <span class="m">85</span> a6 e1 <span class="m">84</span> 8b e1 <span class="m">85</span> b5 e1 <span class="m">84</span> <span class="m">91</span> e1 <span class="m">85</span> b5 e1 <span class="m">86</span> bc e1 <span class="m">84</span> 8f e1 <span class="m">85</span> b3
</span><span class='line'>ec <span class="m">97</span> <span class="m">90</span> ec 9d b4 ed <span class="m">95</span> <span class="m">91</span> ed <span class="m">81</span> ac
</span></code></pre></td></tr></table></div></figure>


<p>As you can see, in the case of the system Ruby, NFD is left untouched. This leads to problems with, for instance, Google Translate. One obvious solution is to outsource the task to <code>iconv</code>, but I have the impression that outsourcing language features to shell commands is a generally despised practice.</p>

<p>There&rsquo;s one more surprise. While <code>pry</code> with latest Rubies tend to handle Unicode very well (unlike <code>irb</code>), I tried <code>pry</code> with the current system Ruby, and it doesn&rsquo;t work; due to this annoying limitation, I couldn&rsquo;t even test the above problem interactively, and had to resort to a script. Maybe the problem can be resolved by compiling Ruby with <code>readline</code> or whatever; I didn&rsquo;t bother. The bottom line is, the system Ruby is not very pleasant for men in the 21st century — good Unicode support ought to be a must. (By the way, NFD in HFS+ is maddening. It breaks Terminal, iTerm, Google Translate, scp with Linux hosts, and the list goes on.)</p>

<p>P.S. In Dropzone 3 custom actions you can select a custom Ruby with the <code>RubyPath</code> meta field, e.g.,</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># RubyPath: /usr/local/bin/ruby</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/26/using-python-3-with-emacs-jedi/">Using Python 3 With Emacs Jedi</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/22/back-up-os-x-app-icons/">Back Up OS X App Icons</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/24/the-new-onedrive-api/">The New OneDrive API</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/21/all-is-not-lost/">All Is Not Lost</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/20/my-dock-and-updated-omnifocus/">My Dock and Updated OmniFocus</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/zmwangx">@zmwangx</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'zmwangx',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Zhiming Wang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'zmwangx';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
