<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta content="pandoc" name="generator"/>
<meta content="Zhiming Wang" name="author"/>
<meta content="2014-10-23T20:03:22-0700" name="date"/>
<title>Ripping copy-protected DVD with mpv</title>
<link href="/img/favicon-152.png" rel="apple-touch-icon-precomposed"/>
<meta content="#FFFFFF" name="msapplication-TileColor"/>
<meta content="/img/favicon-144.png" name="msapplication-TileImage"/>
<style type="text/css">code{white-space: pre;}</style>
<link href="/css/normalize.css" media="all" rel="stylesheet" type="text/css"/>
<link href="/css/theme.css" media="all" rel="stylesheet" type="text/css"/>
<link href="/css/theme-narrow.css" media="only screen and (max-width: 980px)" rel="stylesheet" type="text/css"/>
<link href="/css/theme-enlarge.css" media="only screen and (max-width: 980px) and (orientation: portrait)" rel="stylesheet" type="text/css"/>
<link href="/css/print.css" media="print" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css"/>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53908325-1', 'auto');
ga('require', 'displayfeatures');
ga('send', 'pageview');
</script>
</head>
<body>
<nav>
<div class="logo"><a href="/"><img alt="blog icon" src="/img/icon-400.png"/></a></div>
<div class="title"><a href="/">dl? cmplnts?</a></div>
<div class="author">by <a href="https://github.com/zmwangx" target="_blank">Zhiming Wang</a></div>
</nav>
<article>
<header>
<h1 class="title">Ripping copy-protected DVD with mpv</h1>
<h2 class="meta">
<time class="timestamp" datetime="2014-10-23T20:03:22-0700">October 23, 2014,</time>
by <span class="author">Zhiming Wang</span>
</h2>
</header>
<p><strong><em>11/02/2014 update:</em></strong></p>
<p>See <a href="/blog/2014-11-02-vobcopy-dvdbackup-etc.html">this post</a> for issues, explanations, and more.</p>
<hr/>
<p><strong><em>10/25/2014 update:</em></strong></p>
<p>I'm such an idiot. <code>vobcopy</code> is the real, hassel-free way to go.</p>
<pre><code>brew install vobcopy</code></pre>
<p>Then, with the DVD mounted,</p>
<blockquote>
<p><strong>vobcopy</strong> without any options will copy the title with the most chapters into files of 2GB size into the current working directory.</p>
</blockquote>
<p>Of course there are a ton of options, but I generally hate to browse through options unless I have to, so I'm happy with calling without argument.</p>
<hr/>
<p>Yesterday I was trying to rip a music video off a newly released DVD from Japan. I knew very little about how DRM (in this case, CSS) actually works and how to break it. I tried to operate directly on the VOB file with <code>ffmpeg</code> or <code>mpv</code> but both failed with a lot of header errors — I suppose more files than the VOB are required for authentication? Whatever, maybe I’ll learn the details in the future, but I don’t see the need since DVD is an outdated technology anyway.</p>
<p>So, can we proceed from here? Most certainly. I noticed that although <code>mpv</code> won’t let me play a single VOB, I can simply hand it the DVD mount point, and it will play the whole DVD seamlessly. <strong>Caution:</strong> <code>mpv</code> needs to be compiled with <code>libdvdnav</code> and <code>libdvdread</code>! With brew you just do</p>
<pre><code>brew install mpv --with-libdvdnav --with-libdvdread</code></pre>
<p>For better performance and backup, I first cloned the DVD into a <code>.cdr</code> image (DVD/CD-R Master Image) using Disk Utility (I've never tried creating/cloning image with <code>diskutil</code> CLI, so nothing to report on that). Then I mount the image, say the mount point is <code>/Volumes/UPBX_80165</code>. As said I can hand that mount point to <code>mpv</code> and it simply works, but how about extracting the MPEG-2 video stream? The <code>--stream-capture=&lt;filename&gt;</code> option is there just for you. In principle <code>--stream-dump=&lt;filename&gt;</code> should also work, but without monitoring the output and controlling where to end, I’m not sure if it will ever terminate itself when reading from a DVD (when I stream captured the DVD it just kept repeating itself until I explicitly quit with <code>q</code>). So that's it:</p>
<pre><code>mpv --stream-capture=dump.mpg /Volumes/UPBX_80165</code></pre>
<p>Then you can torture the <code>dump.mpg</code> with <code>ffmpeg</code> however you want. The most obvious thing is to cut out the music video part, and put into a new container like MPEG-TS. Or transcode it to H.264 for your iPhone. The nice thing about <code>dump.mpg</code> is that, unless I got it wrong, there's no quality loss here — the only thing you got rid of is that goddamn DRM.</p>
<footer>
<hr/>
<span class="rfooter">
<a class="rss-icon" href="/rss.xml" target="_blank" title="RSS feed">RSS feed icon</a><a class="atom-icon" href="/atom.xml" target="_blank" title="Atom feed">Atom feed icon</a><a class="cc-icon" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" title="Released under the Creative Commons Attribution 4.0 International license.">Creative Commons icon</a>
<a href="https://github.com/zmwangx" target="_blank">Zhiming Wang</a>
</span>
</footer>
</article>
</body>
</html>
