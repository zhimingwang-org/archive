<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta content="pandoc" name="generator"/>
<meta content="Zhiming Wang" name="author"/>
<meta content="2014-11-05T10:37:58-0800" name="date"/>
<title>List YouTube playlist with youtube-dl</title>
<link href="/img/favicon-152.png" rel="apple-touch-icon-precomposed"/>
<meta content="#FFFFFF" name="msapplication-TileColor"/>
<meta content="/img/favicon-144.png" name="msapplication-TileImage"/>
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<link href="/css/normalize.css" media="all" rel="stylesheet" type="text/css"/>
<link href="/css/theme.css" media="all" rel="stylesheet" type="text/css"/>
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"/>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-53908325-1', 'auto');
ga('require', 'displayfeatures');
ga('send', 'pageview');
</script>
</head>
<body>
<nav>
<div style="height:150px; width:100px; text-align:center;">
<a href="/"><img alt="blog icon" height="100" src="/img/icon-100.png" style="padding: 2px 0;" width="100"/></a>
<div style="padding: 1px 0;"><a href="/"><strong>dl? cmplnts?</strong></a></div>
<div style="font-size: 9pt;">by <a href="https://github.com/zmwangx" target="_blank">Zhiming Wang</a></div>
</div>
</nav>
<article>
<header>
<h1 class="title">List YouTube playlist with youtube-dl</h1>
<h2 class="meta">
<time class="timestamp" datetime="2014-11-05T10:37:58-0800">November 5, 2014,</time>
by <span class="author">Zhiming Wang</span>
</h2>
</header>
<p>Of course you are always welcome to use the <a href="https://developers.google.com/api-client-library/python/">Google APIs Client Library for Python</a> to wrestle with YouTube, which is usually pretty simple. (As an added bonus, YouTube has some <a href="https://developers.google.com/youtube/v3/code_samples/">nice runnable sample scripts</a> to get you started.) With the client library, listing videos in a YouTube playlist is a breeze.</p>
<p>However, if you don't feel like writing code yourself (I usually don't feel like writing code myself until I use something often enough and existing solutions are suboptimal), <code>youtube-dl</code> recently added the functionality to list videos in a playlist with the <code>--flat-playlist</code> option.</p>
<p><a href="https://github.com/rg3/youtube-dl/issues/4003#issuecomment-60322630">According to one of the project collaborators</a>, currently <code>--flat-playlist</code> is only helpful with the <code>-j</code> option for dumping JSON (so I suppose this feature is subject to change). For instance, <code>--flat-playlist</code> alone would emit something like this:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">&gt;</span> <span class="kw">youtube-dl</span> --flat-playlist <span class="st">'https://www.youtube.com/watch?v=gdOwwI0ngqQ&amp;list=PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F'</span>
[<span class="kw">youtube</span>:playlist] Downloading playlist PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F - add --no-playlist to just download video gdOwwI0ngqQ
[<span class="kw">youtube</span>:playlist] PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F: Downloading webpage
[<span class="kw">youtube</span>:playlist] PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F: Downloading page <span class="co">#1</span>
[<span class="kw">download</span>] Downloading playlist: Cam By apinknomfan
[<span class="kw">youtube</span>:playlist] playlist Cam By apinknomfan: Collected 119 video ids (downloading 119 of them)
[<span class="kw">download</span>] Downloading video <span class="co">#1 of 119</span>
[<span class="kw">download</span>] Downloading video <span class="co">#2 of 119</span>
[<span class="kw">download</span>] Downloading video <span class="co">#3 of 119</span>
[<span class="kw">download</span>] Downloading video <span class="co">#4 of 119</span>
<span class="kw">...</span><span class="line-number" data-line="1" style="top: 0px"><!----></span><span class="line-number" data-line="2" style="top: 18px"><!----></span><span class="line-number" data-line="3" style="top: 36px"><!----></span><span class="line-number" data-line="4" style="top: 54px"><!----></span><span class="line-number" data-line="5" style="top: 72px"><!----></span><span class="line-number" data-line="6" style="top: 90px"><!----></span><span class="line-number" data-line="7" style="top: 108px"><!----></span><span class="line-number" data-line="8" style="top: 126px"><!----></span><span class="line-number" data-line="9" style="top: 144px"><!----></span><span class="line-number" data-line="10" style="top: 162px"><!----></span><span class="line-number" data-line="11" style="top: 180px"><!----></span></code></pre></div>
<p>which doesn't really make sense â€” it tells you that it collected 119 video ids, and no more. Once you have <code>-j</code> on, you get JSON data that you can parse with anything:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">&gt;</span> <span class="kw">youtube-dl</span> -j --flat-playlist <span class="st">'https://www.youtube.com/watch?v=gdOwwI0ngqQ&amp;list=PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F'</span>
{<span class="st">"url"</span>: <span class="st">"gdOwwI0ngqQ"</span>, <span class="st">"_type"</span>: <span class="st">"url"</span>, <span class="st">"ie_key"</span>: <span class="st">"Youtube"</span>, <span class="st">"id"</span>: <span class="st">"gdOwwI0ngqQ"</span>}
{<span class="st">"url"</span>: <span class="st">"j9l5nchv1Z8"</span>, <span class="st">"_type"</span>: <span class="st">"url"</span>, <span class="st">"ie_key"</span>: <span class="st">"Youtube"</span>, <span class="st">"id"</span>: <span class="st">"j9l5nchv1Z8"</span>}
{<span class="st">"url"</span>: <span class="st">"znW5ALwWNQw"</span>, <span class="st">"_type"</span>: <span class="st">"url"</span>, <span class="st">"ie_key"</span>: <span class="st">"Youtube"</span>, <span class="st">"id"</span>: <span class="st">"znW5ALwWNQw"</span>}
{<span class="st">"url"</span>: <span class="st">"qyE7-auTIcc"</span>, <span class="st">"_type"</span>: <span class="st">"url"</span>, <span class="st">"ie_key"</span>: <span class="st">"Youtube"</span>, <span class="st">"id"</span>: <span class="st">"qyE7-auTIcc"</span>}
<span class="kw">...</span><span class="line-number" data-line="1" style="top: 0px"><!----></span><span class="line-number" data-line="2" style="top: 18px"><!----></span><span class="line-number" data-line="3" style="top: 36px"><!----></span><span class="line-number" data-line="4" style="top: 54px"><!----></span><span class="line-number" data-line="5" style="top: 72px"><!----></span><span class="line-number" data-line="6" style="top: 90px"><!----></span></code></pre></div>
<p>The most straightforward way to parse this is to use a command line JSON parser, the best one being <a href="https://github.com/stedolan/jq">jq</a>:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">&gt;</span> <span class="kw">youtube-dl</span> -j --flat-playlist <span class="st">'https://www.youtube.com/watch?v=gdOwwI0ngqQ&amp;list=PLPpZI8R1zUfrkDbmJMOBhEbJ9Td9vbV-F'</span> <span class="kw">|</span> <span class="kw">jq</span> -r <span class="st">'.id'</span> <span class="kw">|</span> <span class="kw">sed</span> <span class="st">'s_^_https://youtube.com/v/_'</span>
<span class="kw">https</span>://youtube.com/v/gdOwwI0ngqQ
<span class="kw">https</span>://youtube.com/v/j9l5nchv1Z8
<span class="kw">https</span>://youtube.com/v/znW5ALwWNQw
<span class="kw">https</span>://youtube.com/v/qyE7-auTIcc
<span class="kw">...</span><span class="line-number" data-line="1" style="top: 0px"><!----></span><span class="line-number" data-line="2" style="top: 18px"><!----></span><span class="line-number" data-line="3" style="top: 36px"><!----></span><span class="line-number" data-line="4" style="top: 54px"><!----></span><span class="line-number" data-line="5" style="top: 72px"><!----></span><span class="line-number" data-line="6" style="top: 90px"><!----></span></code></pre></div>
<p>There you go, a list of URIs you can use. Of course you can put this in a script to save some typing:</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/usr/bin/env bash</span>
<span class="co"># Takes a YouTube URI to a playlist (fairly liberal, it's fine as long</span>
<span class="co"># as the playlist id can be extracted), and prints a list of URIs in a</span>
<span class="co"># YouTube playlist.</span>
<span class="co">#</span>
<span class="co"># Requires youtube-dl 2014.10.24, tested on youtube-dl</span>
<span class="co"># 2014.11.02.1. Feature subject to change.</span>
<span class="kw">youtube-dl</span> -j --flat-playlist <span class="st">"</span><span class="ot">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="kw">jq</span> -r <span class="st">'.id'</span> <span class="kw">|</span> <span class="kw">sed</span> <span class="st">'s_^_https://youtube.com/v/_'</span><span class="line-number" data-line="1" style="top: 0px"><!----></span><span class="line-number" data-line="2" style="top: 18px"><!----></span><span class="line-number" data-line="3" style="top: 36px"><!----></span><span class="line-number" data-line="4" style="top: 54px"><!----></span><span class="line-number" data-line="5" style="top: 72px"><!----></span><span class="line-number" data-line="6" style="top: 90px"><!----></span><span class="line-number" data-line="7" style="top: 108px"><!----></span><span class="line-number" data-line="8" style="top: 126px"><!----></span></code></pre></div>
<p><strong><em>Aside:</em></strong> I first embedded the gist here, but <a href="https://i.imgur.com/m3cr0Im.png">it looked a bit off</a>. See <a href="https://github.com/imathis/octopress/issues/1392">imathis/octopress#1392</a>.</p>
<blockquote>
<p>In the next version of the Gist tag plugin we are just downloading the gists and embedding them upon generation so we don't have to worry about GitHub going down and breaking all your gists, or changing the HTML and breaking all the styles.</p>
<p>For the time being I suggest embedding your code snippets directly if you want them to look good.</p>
</blockquote>
<p>Okay. End of aside.</p>
<p>By the way, <code>youtube-dl</code> supports playlist bulk download natively. The reason I need a list of video ids or URIs, however, is that among other things, <code>youtube-dl</code> doesn't download highest resolution DASH video by default, so I have to rely on something like <code>youtube-dl-dash</code> (<a href="https://github.com/zmwangx/sh/blob/master/youtube-dl-dash">link</a>) to download the best version.</p>
<footer>
<hr/>
<span class="rfooter">
<a class="feed-icon" href="/atom.xml" target="_blank" title="Atom feed">Atom feed icon</a>
<a class="cc-icon" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" title="Released under the Creative Commons Attribution 4.0 International license.">Creative Commons icon</a>
<a href="https://github.com/zmwangx" target="_blank">Zhiming Wang</a>
</span>
</footer>
</article>
</body>
</html>
